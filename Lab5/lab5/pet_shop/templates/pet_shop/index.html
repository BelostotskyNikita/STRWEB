{% extends "pet_shop/base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'pet_shop/css/index.css' %}">
<link rel="stylesheet" href="{% static 'pet_shop/css/slider.css' %}">
{% endblock %}
{% block content %}

<div class="container last-item-container">
    <div class="animation-container">
        <div class="seaweed seaweed-left">
            <img src="{% static 'pet_shop/images/animation/seaweed.png' %}" alt="Водоросли">
        </div>
        <div class="seaweed seaweed-right">
            <img src="{% static 'pet_shop/images/animation/seaweed.png' %}" alt="Водоросли">
        </div>
        
        <div class="fish fish-1">
            <img src="{% static 'pet_shop/images/animation/fish_1.png' %}" alt="Рыбка">
        </div>
        <div class="fish fish-2">
            <img src="{% static 'pet_shop/images/animation/fish_2.png' %}" alt="Рыбка">
        </div>
        <div class="fish fish-3">
            <img src="{% static 'pet_shop/images/animation/fish_3.png' %}" alt="Рыбка">
        </div>
        
        <div class="shop-title-animation">
            <h1 class="shop-title">Pet Shop</h1>
        </div>
    </div>

    <div class="slider-section">
        <h3 class="banner-title">Реклама</h3>
        <div id="main-slider" class="slider-container" 
             data-loop="{{ slider_settings.loop|yesno:'true,false' }}"
             data-navs="{{ slider_settings.navs|yesno:'true,false' }}"
             data-pags="{{ slider_settings.pags|yesno:'true,false' }}"
             data-auto="{{ slider_settings.auto|yesno:'true,false' }}"
             data-stop-mouse-hover="{{ slider_settings.stop_mouse_hover|yesno:'true,false' }}"
             data-delay="{{ slider_settings.delay }}">
            <div class="slider-wrapper">
                {% for slide in slides %}
                <div class="slider-slide">
                    {% if slide.link %}
                    <a href="{{ slide.link }}" class="slider-slide-link" target="_blank">
                        <img src="{{ slide.image.url }}" alt="{{ slide.caption|default:'Слайд' }}">
                        {% if slide.caption %}
                        <div class="slider-caption">{{ slide.caption }}</div>
                        {% endif %}
                    </a>
                    {% else %}
                    <img src="{{ slide.image.url }}" alt="{{ slide.caption|default:'Слайд' }}">
                    {% if slide.caption %}
                    <div class="slider-caption">{{ slide.caption }}</div>
                    {% endif %}
                    {% endif %}
                </div>
                {% empty %}
                <div class="slider-slide active">
                    <img src="{% static 'pet_shop/images/banner/banner1.jpg' %}" alt="Баннер 1">
                </div>
                <div class="slider-slide">
                    <img src="{% static 'pet_shop/images/banner/banner2.jpg' %}" alt="Баннер 2">
                </div>
                <div class="slider-slide">
                    <img src="{% static 'pet_shop/images/banner/banner3.jpg' %}" alt="Баннер 3">
                </div>
                <div class="slider-slide">
                    <img src="{% static 'pet_shop/images/banner/banner4.jpg' %}" alt="Баннер 4">
                </div>
                <div class="slider-slide">
                    <img src="{% static 'pet_shop/images/banner/banner5.jpg' %}" alt="Баннер 5">
                </div>
                <div class="slider-slide">
                    <img src="{% static 'pet_shop/images/banner/banner6.jpg' %}" alt="Баннер 6">
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="news-section">
        <h2 class="section-title">Последние новости</h2>
        {% if last %}
            <div class="last-item-card">
                <h3 class="last-item-title">{{ last.title }}</h3>
                <form method="get">
                    {% if request.GET.show == "full" %}
                        <p class="last-item-text expanded">
                            {{ last.text }}
                            <b>Жирный текст</b>, <em>акцентированный текст</em>, <i>курсивный текст</i>,
                            <s>перечеркнутый текст</s>, <strong>важный текст</strong>, <u>подчеркнутый текст</u>,
                            <small>мелкий текст</small>, H<sub>2</sub>O, E=mc<sup>2</sup>,
                            <code>код программы</code>, <var>переменная</var>, <samp>вывод программы</samp>,
                            <kbd>Ctrl+C</kbd>, <abbr title="HyperText Markup Language">HTML</abbr>,
                            <dfn>термин</dfn>, <q cite="https://example.com">цитата</q>,
                            <cite>название произведения</cite>, <time datetime="2023-10-01">1 октября 2023</time>,
                            <mark>выделенный текст</mark>.
                        </p>
                        <button type="submit" class="show-more-btn">Скрыть</button>
                    {% else %}
                        <p class="last-item-text">{{ last.text|truncatechars:200 }}</p>
                        <button type="submit" name="show" value="full" class="show-more-btn">Подробнее</button>
                    {% endif %}
                </form>
                <p class="last-item-date">{{ last.date }}</p>
            </div>
        {% else %}
            <div class="no-items-message">Нет доступных записей для отображения</div>
        {% endif %}
    </div>

    <div class="catalog-section">
        <h2 class="section-title">Каталог товаров</h2>
        {% if products %}
        <div class="product-grid">
            {% for product in products %}
            <div class="product-card">
                <img src="{% static product.pic.url %}" alt="{{ product.name }}">
                <div class="product-name">{{ product.name }}</div>
                <div class="product-price">${{ product.price }}</div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="no-items-message">Товары не найдены</div>
        {% endif %}
    </div>

    <div class="partners-section">
        <h2 class="section-title">Партнёры</h2>
        <div class="partners-grid">
            {% for partner in partners %}
            <div class="partner-item">
                <a href="{{ partner.website }}" target="_blank" class="partner-link">
                    <img src="{% static partner.logo.url %}" alt="{{ partner.name }}" class="partner-logo">
                    <div class="partner-name">{{ partner.name }}</div>
                </a>
            </div>
            {% empty %}
            <div class="no-items-message">Партнёры не найдены</div>
            {% endfor %}
        </div>
    </div>

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'pet_shop/js/slider.js' %}"></script>
<script src="{% static 'pet_shop/js/slider-init.js' %}"></script>
{% endblock %}
